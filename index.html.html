<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Trixia GWA Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

<style>
:root {
  --bg: linear-gradient(135deg, #ffd6e0, #ffe0f0);
  --card-bg: rgba(255, 240, 245, 0.7);
  --primary: #d6336c;
  --secondary: rgba(255, 182, 193, 0.5); 
  --text: #3f1d2b;
  --muted: #a3667f;
  --toggle-off: #f3d4e0;
  --toggle-on: #f472b6;
  --icon-active: #ffb6c1; 
  --icon-inactive: #f3d4e0;
  --btn-hover: #c0266f;
}

body.dark {
  --bg: linear-gradient(135deg, #3a0e28, #5b1a3d);
  --card-bg: rgba(91, 26, 61, 0.85);
  --text: #ffe6f0;
  --muted: #f7c6d9;
  --secondary: rgba(199, 97, 144, 0.6);
  --toggle-off: #62254f;
  --toggle-on: #ff6fa3;
  --icon-active: #ffb6c1; 
  --icon-inactive: #f3d4e0;
  --btn-hover: #ff4d94;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--bg);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  color: var(--text);
  font-family: 'Roboto', sans-serif;
  transition: background .3s, color .3s;
}

.container {
  width: 100%;
  max-width: 440px;
  background: var(--card-bg);
  border-radius: 20px;
  padding: 5% 4%;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.12);
  transition: background .3s, color .3s;
  position: relative;
}

.top-bar { display: flex; justify-content: flex-end; margin-bottom: 16px; }
.switch { position: relative; display: inline-block; width: 52px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: relative; display: flex; align-items: center; justify-content: space-between; background-color: var(--toggle-off); border-radius: 50px; cursor: pointer; transition: background .3s; padding: 0 6px; height: 100%; font-size: 14px; }
.slider .icon-sun, .slider .icon-moon { pointer-events: none; transition: color .3s; }
.icon-sun { color: var(--icon-active); }
.icon-moon { color: var(--icon-inactive); }
input:checked + .slider .icon-sun { color: var(--icon-inactive); }
input:checked + .slider .icon-moon { color: var(--icon-active); }
.slider:before { content: ""; position: absolute; top: 4px; left: 4px; width: 20px; height: 20px; background-color: white; border-radius: 50%; transition: transform .3s, background .3s; }
input:checked + .slider:before { transform: translateX(24px); }

.top-icon { display: flex; justify-content: center; margin-top: 8px; margin-bottom: 24px; }
.top-icon img { width: 25%; max-width: 90px; height: auto; object-fit: contain; border-radius: 50%; box-shadow: 0 4px 15px rgba(255, 105, 180, 0.5); transition: transform 0.3s, box-shadow 0.3s; }
.top-icon img:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(255, 105, 180, 0.7); }

h1 { margin: 0 0 8px; text-align: center; color: var(--primary); font-size: 2rem; font-family: 'Poppins', sans-serif; font-weight: 700; }
.subtitle { text-align: center; font-size: 1rem; color: var(--muted); margin-bottom: 24px; }

.subject { display: grid; grid-template-columns: 1fr 0.8fr auto; gap: 12px; margin-bottom: 12px; background: var(--secondary); padding: 14px; border-radius: 14px; backdrop-filter: blur(8px); transition: transform .3s, box-shadow .3s, background .3s; }
.subject:hover { transform: translateY(-3px); box-shadow: 0 12px 24px rgba(0,0,0,0.15); background: rgba(255,192,203,0.65); }
.subject input[type="number"] { width: 100%; padding: 10px 12px; border-radius: 10px; border: none; font-size: 0.9rem; font-family: 'Roboto', sans-serif; transition: background .3s, color .3s, box-shadow .3s; }
.subject input[type="number"]:nth-child(1) { background: rgba(255,182,193,0.7); color: var(--text); }
.subject input[type="number"]:nth-child(2) { background: rgba(255,192,203,0.7); color: var(--text); }

body.dark .subject { background: rgba(255, 105, 180, 0.2); backdrop-filter: blur(12px); box-shadow: 0 0 12px rgba(255,105,180,0.5), 0 4px 20px rgba(0,0,0,0.25); border: 1px solid rgba(255, 105, 180, 0.4); }
body.dark .subject input[type="number"] { background: rgba(255, 105, 180, 0.25); color: #fff; border-radius: 12px; border: 1px solid rgba(255, 182, 193, 0.4); font-size: 0.9rem; padding: 10px 12px; }

button { border: none; border-radius: 10px; padding: 12px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background .3s, color .3s, transform .2s; font-family: 'Poppins', sans-serif; }
.remove { background: rgba(255,105,180,0.2); color: #db2777; }
body.dark .remove { background: rgba(255,105,180,0.2); color: #ff99c2; }
.add { width: 100%; background: linear-gradient(135deg, #ff7eb9, #ff49a0); margin-top: 12px; font-weight: 600; color: #fff; }
body.dark .add { background: linear-gradient(135deg, #ff69b4, #db2777); color: #fff; }
.add:hover { transform: scale(1.05); }
.calculate { width: 100%; background: linear-gradient(135deg, #d6336c, #e11d48); color: #fff; margin-top: 14px; font-weight: 700; }
.calculate:hover { transform: scale(1.05); }
.result { margin-top: 18px; text-align: center; font-size: 1.3rem; font-weight: 600; color: #d6336c; transition: color .3s; }
footer { margin-top: 24px; text-align: center; font-size: 0.8rem; color: var(--muted); }

.modal { display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); font-family: 'Poppins', sans-serif; }
.modal-content { background: linear-gradient(135deg, #ffb6c1, #ff69b4); margin: 15% auto; padding: 30px; border-radius: 16px; width: 80%; max-width: 360px; text-align: center; color: #fff; box-shadow: 0 8px 30px rgba(0,0,0,0.25); position: relative; overflow: hidden; }
.modal-content h2 { margin-top: 0; font-size: 1.6rem; }
.modal-content p { font-size: 1.1rem; margin: 12px 0 0; }
.close-btn { margin-top: 20px; padding: 10px 20px; background: #fff; color: #ff69b4; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: transform 0.2s; }
.close-btn:hover { transform: scale(1.05); }

.sparkle, .star { position: absolute; width: 6px; height: 6px; pointer-events: none; opacity: 0.9; animation: sparkleAnim 1.2s infinite; background: #fff; clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); }
.sparkle { width: 5px; height: 5px; border-radius: 50%; clip-path: none; background: #fff; }

@keyframes sparkleAnim { 0% { transform: scale(0.5) rotate(0deg); opacity: 0.8; } 50% { transform: scale(1.2) rotate(180deg); opacity: 1; } 100% { transform: scale(0.5) rotate(360deg); opacity: 0.8; } }

/* ----------- MOBILE RESPONSIVE ----------- */
@media (max-width: 480px) {
  .container { padding: 6% 3%; border-radius: 16px; }
  h1 { font-size: 1.6rem; }
  .subtitle { font-size: 0.9rem; margin-bottom: 18px; }
  .top-icon img { width: 40%; max-width: 70px; }
  .subject { grid-template-columns: 1fr 0.9fr auto; gap: 10px; padding: 10px; }
  .subject input[type="number"] { font-size: 0.85rem; padding: 8px 10px; }
  button { font-size: 0.9rem; padding: 10px; }
  .add, .calculate { width: 100%; }
  .modal-content { width: 90%; padding: 20px; }
  .modal-content h2 { font-size: 1.4rem; }
  .modal-content p { font-size: 1rem; }
}
</style>
</head>

<body>
<div class="container">

  <div class="top-bar">
    <label class="switch">
      <input type="checkbox" id="themeToggle">
      <span class="slider">
        <span class="icon-sun">â˜€</span>
        <span class="icon-moon">ðŸŒ™</span>
      </span>
    </label>
  </div>

  <h1>Trixia GWA Calculator</h1>
  <div class="subtitle">Developed by Yuan</div>

  <div class="top-icon">
    <img src="/hellokitty.png" alt="Hello Kitty" />
  </div>

  <div id="subjects"></div>

  <button class="add" onclick="addSubject()">âž• Add Subject</button>
  <button class="calculate" onclick="calculateGWA()">ðŸ“Š Calculate GWA</button>

  <div id="result" class="result"></div>

  <footer>Tarlac State University â€¢ 2025</footer>
</div>

<div id="gwaModal" class="modal">
  <div class="modal-content" id="modalContent">
    <h2 id="modalTitle"></h2>
    <p id="modalMessage"></p>
    <button class="close-btn" onclick="closeModal()">Close</button>
  </div>
</div>

<canvas id="confetti-canvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1000;"></canvas>

<script>
// ------------- JS CODE (same as your original) -------------
const toggle = document.getElementById("themeToggle");
const modal = document.getElementById("gwaModal");
const modalContent = document.getElementById("modalContent");
const modalTitle = document.getElementById("modalTitle");
const modalMessage = document.getElementById("modalMessage");
const confettiCanvas = document.getElementById("confetti-canvas");
const ctx = confettiCanvas.getContext('2d');
let confettiParticles = [];

function addSubject() {
  const container = document.getElementById("subjects");
  const div = document.createElement("div");
  div.className = "subject";
  div.innerHTML = `
    <input type="number" step="0.01" min="1" max="5" placeholder="Final Grade">
    <input type="number" min="1" placeholder="Units">
    <button class="remove" onclick="this.parentElement.remove()">âœ–</button>
  `;
  container.appendChild(div);
}

function calculateGWA() {
  let total = 0, units = 0;
  document.querySelectorAll(".subject").forEach(s => {
    const g = parseFloat(s.children[0].value);
    const u = parseFloat(s.children[1].value);
    if (!isNaN(g) && !isNaN(u)) { total += g * u; units += u; }
  });

  if (units) {
    const gwa = total / units;
    document.getElementById("result").textContent = `Your GWA is ${gwa.toFixed(2)}`;

    if (gwa >= 1.00 && gwa <= 1.70) {
      showModal("ðŸŽ‰ Dean's Lister!", "Congratulations! You made it to the Dean's List! ðŸŽ“");
      launchConfetti();
      launchStars();
    } else if (gwa > 1.70 && gwa <= 2.50) {
      showModal("ðŸ‘ Good Job!", "Keep pushing for excellence! You're doing well!");
    } else if (gwa > 2.50) {
      showModal("ðŸ“˜ Keep Going!", "Don't give up! You can improve your GWA!");
    }
  } else {
    document.getElementById("result").textContent = "Please enter at least one subject.";
  }
}

function showModal(title, message) {
  modalTitle.textContent = title;
  modalMessage.textContent = message;
  modal.style.display = "block";
}
function closeModal() { 
  modal.style.display = "none"; 
  removeStars();
}
window.onclick = function(event) { if (event.target == modal) closeModal(); }

toggle.addEventListener("change", () => {
  document.body.classList.toggle("dark", toggle.checked);
  localStorage.setItem("theme", toggle.checked ? "dark" : "light");
});
if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark");
  toggle.checked = true;
}
addSubject();

// ------------- Confetti & Stars same as your original -------------
function launchConfetti() {
  confettiParticles = [];
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
  const colors = ["#ffb6c1","#ff69b4","#ffc0cb","#fff0f5","#ff77ff"];
  const count = window.innerWidth < 480 ? 80 : 150; // mobile reduce particles
  for (let i = 0; i < count; i++) {
    confettiParticles.push({
      x: Math.random() * confettiCanvas.width,
      y: Math.random() * confettiCanvas.height - confettiCanvas.height,
      r: Math.random() * 6 + 4,
      d: Math.random() * 50,
      color: colors[Math.floor(Math.random()*colors.length)],
      tilt: Math.random() * 10 - 10,
      tiltAngleIncremental: Math.random() * 0.07 + 0.05,
      tiltAngle: 0
    });
  }
  animateConfetti();
  setTimeout(()=>{ confettiParticles = []; ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); }, 5000);
}
function drawConfetti() {
  ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
  confettiParticles.forEach(p => {
    ctx.beginPath();
    ctx.lineWidth = p.r / 2;
    ctx.strokeStyle = p.color;
    ctx.moveTo(p.x + p.tilt + p.r / 4, p.y);
    ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r / 2);
    ctx.stroke();
  });
  updateConfetti();
}
function updateConfetti() {
  confettiParticles.forEach(p => {
    p.tiltAngle += p.tiltAngleIncremental;
    p.y += (Math.cos(p.d) + 3 + p.r / 2) / 2;
    p.tilt = Math.sin(p.tiltAngle) * 15;
    if (p.y > confettiCanvas.height) { p.y = -10; p.x = Math.random() * confettiCanvas.width; }
  });
}
function animateConfetti() {
  if (confettiParticles.length > 0) {
    drawConfetti();
    requestAnimationFrame(animateConfetti);
  }
}
window.addEventListener('resize', () => {
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
});

// Star Sparkles
let starInterval;
function launchStars() {
  removeStars();
  for(let i=0;i<20;i++) createStar();
  starInterval = setInterval(createStar, 350);
}
function createStar() {
  const star = document.createElement("div");
  star.className = "star";
  star.style.left = Math.random()*modalContent.offsetWidth + "px";
  star.style.top = Math.random()*modalContent.offsetHeight + "px";
  star.style.width = (Math.random()*6+4) + "px";
  star.style.height = star.style.width;
  star.style.animationDuration = (Math.random()*1+0.8) + "s";
  star.style.backgroundColor = ["#fff","#ffe6f0","#ffb6c1","#ff77ff"][Math.floor(Math.random()*4)];
  modalContent.appendChild(star);
  setTimeout(()=>{ star.remove(); }, 1500);
}
function removeStars() {
  clearInterval(starInterval);
  document.querySelectorAll(".star").forEach(s=>s.remove());
}
</script>
</body>
</html>
